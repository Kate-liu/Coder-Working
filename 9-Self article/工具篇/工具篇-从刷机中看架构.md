

# 工具篇|从5次刷机中看系统架构

## 前言

你只是刷机（换手机系统），你从哪里看系统的架构吗？你懂系统的架构吗？什么是架构？

我想这篇文章，会给你一个**视角**。

本片文章会涉及一些**系统架构**的内容，但是也会涉及**刷机**。

全文的内容，是我的亲身经历得到的总结，希望大家可以喜欢。

高能预警：*刷机有风险，刷机有风险，刷机有风险！！！*





## 正文

全文我会使用收获的方式进行展示一些大家都清楚，大家都看到，但是真正的样子又是什么？

虽然给手机和装电脑系统一样简单，但是刷好了也就三分钟的事，刷不好，就真的成为了小板砖。慎重一点！

最后说一下，全文围绕的是**魅族手机**，其他产商需要自行确定。毕竟一个产商一个**生态**。





### 背景介绍

前一段时间，我把我的手机 **root**了，也就是手机获得管理员权限，这样就可以随便操作手机，比如：系统应用就可以直接卸载了；可以安装Android的桌面视窗（原有系统上进行view的封装）；可以直接调用手机系统的API（运行程序）。

但是，缺陷就是各种银行的APP，由于手机root了，直接打不开应用，例如：中国建设银行APP（直接提示root，不能操作），招商银行APP（比较友好，只是提醒root，基本操作没有问题）；完美校园APP（刚启动直接弹窗提醒：设备已root）。

然后，终于我在这个周末刷机了，root的手机，恢复出厂设置不好使。**只能刷机**。







### 收获仓库

#### 收获一：刷机可以解决root的问题！

我的手机机型是**魅蓝note6**。

刷机前系统：**flyme7.1.12A**。

flyme官网：<https://www.flyme.cn/>

**初次刷机**，比较小心，使用的是官方的出厂版本，按照官方的教程，一步一步走下去，竟然成功了。版本降级为：flyme6.xxx。但是，出厂版本一般都是两年前，这都什么年代了，需要与时俱进，然后借助之前的经验，开始了下一次尝试。

**二刷**，使用稳定版本，非常轻松的完成了刷机。版本升级为：7.3.0.0A。表示官方刷机已经不可以满足我了，开始一场虐心的三刷。

**三刷**，使用高通的9008线刷，直接将flyme刷成了Android系统，系统占用内存变为6.4G。相当的满意，但是界面完全和之前的不一样，非常不爽，接着准备刷回官方的系统。。。。（这里需要看运气！）

在上面的三次刷机中，证明：root确实可以刷机解决的。（别忘记了提前备份应用数据）



#### 收货二：第三方刷机，可以回退官方版本！

在我使用第三方的高通刷机，刷入了第三方的系统之后，表示不满意，选择回退。但是**直接回退官方版本，这条路不通**。需要一个中间件。

这里不能直接回退的原因：**第三方系统的recovery操作被更改了**。（没有这个，你就进不了官方版本的系统包。）

所以接着上面的三刷，我又开始了接下来的两刷。

**四刷**，依然使用高通的9008线刷工具，但是这一次的刷机软件包**必须使用flyme系统的版本**。（在网上找把官方版本更改的刷机包）忘记介绍了为什么使用高通的工具刷机，因为：本手机是**高通CPU型号手机**。本次刷机，直接将第三方的Android刷成了flyme7.8.12.11-beta版本。

**五刷**，按照官方的刷机包，以及相应的操作就可以了。魅族手机，在开机之后会首先出现“MEIZU”的名称，接着会出现“青年良品”，接着就跳转到升级系统和清除数据环节。接着等待就可以，刷机三分钟，启动1分钟，设置30秒，就完成了。

在上面的两次刷机中，证明：在刷入第三方之后，是可以回退官方系统的，但是必须使用中间系统作为过渡。





#### 收获三：刷机的过程与系统架构！

先谈一下系统架构，操作系统起源于**冯诺依曼体系结构**，不要觉得深奥，无论是电脑，还是手机，整体的架构思想都源于冯诺依曼。简单点就是：中央处理器，存储器，输入输出设备。

别忘记了，**Android是基于Linux内核2.6版本的**，所以差别在于演进的“**需求**”，带来了linux操作系统与Android的差距。这也反映了一个问题，现在的很多新技术，好多的新领域，其实都是由需求演化而来，当然也有创新，但是本质的东西就是那些最基本的内容。

我想，我应该把系统架构这个内容视角打开了，那就来看一下刷机的过程。

1.将ROM包放在手机内置存储的根文件路径下。类比于安装操作系统，将iso文件制作成U盘或者直接放到某一下文件夹下。

2.手机关机。类比于操作系统关机。

3.手机开机，按住电源键，音量“+”键，直到手机振动松开。类比于电脑开始按F2或者F12或者Del键。

4.手机的第一个页面，“MEIZU”名称。类似于电脑开始的主板厂家名称，如果是快速启动系统，你就看不到了直接跳过了输出到显示屏的操作。

5.手机进入第二个页面，一般此时就直接进入了，你放在根目录下的ROM包。对比电脑，就是你进入安装操作系统的第一个页面，一般会非常快的跳过，直接进入配置阶段。

6.手机进入选择界面，选择是否升级系统，是否清除数据（清除磁盘上的数据，不可恢复！）。对比安装成操作系统的就是你对于语言的设置，对于磁盘分区的设置，你对时区的设置等等。

7.确定安装。类比操作系统的确定。

8.手机系统安装结束中，会安装操作系统，会优化应用（安装系统应用，安装自带应用。这两个是不一样的！）对比，电脑操作系统，一般纯净版本系统，装完什么软件都没有，不纯净的装完就是一堆什么鬼。（所以，手机操作系统是不纯净，哈哈！）

9.手机安装结束，会让你选择语言，选择时区，选择主题等等。对比操作系统的语言，时区，网络配置等等。（Deepin Linux系统安装的时候，也会让你选择主题，其他的操作系统貌似还没见过。）

10.手机进入启动页面，这个时候一般是自动给你重新启动，执行的就是重新启动的代码。电脑的话，直接就进入了桌面。

综上，我们应该看到了手机与电脑的共通点。在整个**需求演变**的同时，那些**变化点**一直都没有变，相反那些**不变点**却已经从电脑变成了手机。所以，系统的设计需要抓住不变点，看清楚变化点。找到需求的边界，你会瞬间恍然大悟的。











### 总结

全文都是从一个**技术的角度**来看点问题。

从侧面也反映出了一些问题。

其实，我们在学习的时候，学的不少，但是真正有用的有多少，也就是学习的不变点与稳定点。我们需要有一双血亮的大眼睛，看到什么是重点，什么可以放一放。

在我最近的学习中，我发现了基本功的重要性，操作系统等。很多东西，都可以从系统的角度来了解，可能是**系统才是比较全面的视角吧！**







## 结束语

很多技术的问题，都不是问题。

知识有深度，有广度，并不是什么东西都是必须要学习的，由衷的希望你我可以抓住稳定点，浅谈变化点。

最后的最后，来一点忠告：刷机，一般人还是不要尝试，尤其只是会刷微博，看朋友圈的人~（我自己在使用线刷的时候，也为我捏了一把汗！！！）

周末愉快啦~（记得学习哈！）






























































































































































