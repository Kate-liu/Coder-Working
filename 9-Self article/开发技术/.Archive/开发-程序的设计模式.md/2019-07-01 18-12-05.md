# 开发|设计模式
*设计模式是对软件设计中普遍存在（反复出现）的各种问题，所提出的解决方案。*

## 前言
    目前所有的文章思想格式都是:知识+情感。
    知识:对于所有的知识点的描述。力求不含任何的自我感情色彩。
    情感:用我自己的方式，解读知识点。力求通俗易懂，完美透析知识。

## 正文
**设计模式有三大类:创建型模式、结构型模式、行为型模式。在进入设计模式之前，需要了解面向对象是什么，接口是什么，面向对象设计SOLID原则是什么。**

### 知识储备
#### 1.面向对象是什么？
#####  基本概念
    面向对象的三大特性:封装、继承、多态。
    
    封装:
        【封装】
         隐藏对象的属性和实现细节，仅对外提供公共访问方式。
        【好处】
            a.将变化隔离；       
            b.便于使用；    
            c.提高复用性；   
            d.提高安全性；   
        【封装原则】
            a.将不需要对外提供的内容都隐藏起来；
            b.把属性都隐藏，提供公共方法对其访问。
       

     继承:
        继承是一种创建新类的方式，在python中，新建的类可以继承一个或多个父类，父类又可称为基类或超类，新建的类称为派生类或子类。
        
    多态:
        多态指的是一类事物有多种形态。python的设计本身就是多态的语言。多态不是语法，是一种设计思想。

    注意:三大特性的顺序，尽量不要说错，是有层级关系的。
    

#### 2.接口是什么？
##### 基本概念
    接口：若干抽象方法的集合

    作用：限制实现接口的类必须按照接口给定的调用方式实现这些方法；对高层模块隐藏了类的内部实现。

*解释:接口，就是高层，也就是client的调用方式，必须和接口匹配。甚至client不需要关心接口是什么实现的，只需要看接口就知道怎么调用。*

##### python实现接口
    使用abstractmethod的抽象类方法实现接口。其中pay为接口，所有继承Payment的类都需要实现该方法，不然那就会报错，TypeError。

```python
from abc import ABCMeta, abstractmethod

class Payment(metaclass=ABCMeta):
    # ABCMeta == abstract class Meta
    @abstractmethod
    def pay(self, money):
        pass
        
class Alipay(Payment):
    pass

class WechatPay(Payment):
    def pay(self, money):
        print("微信支付%d元." % money)
```


#### 3.面向对象设计SOLID原则是什么？
##### 基本概念
    S.O.L.I.D设计原则是由Robert C. Martin 在一篇文章中提出的"first five principles" 而来。
   
    Single-responsibility principle :单一职责原则
    Open-closed Principle：开闭原则
    Liskov substitution principle：里式替换原则
    Interface segregation principle：接口隔离原则
    Dependency Inversion principle：依赖倒置原则

##### 单一职责原则
    英文:
    The single responsibility principle revolves around the claim that a certain code module (most often, a class) should only have responsibility over one part of the functionality provided by the software.

    中文:
    描述:一个类只有一个变化因子，即一个类只有一个职责

    解释:
    问题由来：类T负责两个不同的职责：职责P1，职责P2。当由于职责P1需求发生改变而需要修改 类T时，有可能会导致原本运行正常的职责P2功能发生故障。
    解决方案：遵循单一职责原则。分别建立两个类T1、T2，使T1完成职责P1功能，T2完成职责P2功能。 这样，当修改类T1时，不会使职责P2发生故障风险；同理，当修改T2时，也不会使职责P1发生故障风险。

##### 开闭原则
    英文:
    This principle states: “software entities (classes, modules, functions, etc.) should be open for extension, but closed for modification".

    中文:
    描述:软件实体（类，模块，方法等）应该对扩展开放，对修改封闭

    解释:
    问题由来：在软件的生命周期内，因为变化、升级和维护等原因需要对软件原有代码进行修改时， 可能会给旧代码中引入错误，也可能会使我们不得不对整个功能进行重构，并且需要原有代码经过 重新测试。
    解决方案：当软件需要变化时，尽量通过扩展软件实体的行为来实现变化，而不是通过修改已有的 代码来实现变化。


##### 里式替换原则
    英文:
    Liskov Substitution Principle states the following: “in a computer program, if S is a subtype of T, then objects of type T may be replaced with objects of type S (i.e., objects of type S may substitute objects of type T) without altering any of the desirable properties of that program (correctness, task performed, etc.)”.

    中文:
    描述:如果类型S是类型T的子类型，那么T的对象可以被S的对象所替换并且不会引发程序行为的变化 ，即1.子类可以完全替代父类。2.子类可以扩展父类的功能，但不能改变父类原有的功能。

    解释:
    问题由来：有一功能P1，由类A完成。现需要将功能P1进行扩展，扩展后的功能为P，其中P由原有 功能P1与新功能P2组成。新功能P由类A的子类B来完成，则子类B在完成新功能P2的同时，有可能会 导致原有功能P1发生故障。
    解决方案：当使用继承时，遵循里氏替换原则。类B继承类A时，除添加新的方法完成新增功能P2外 ，尽量不要重写父类A的方法，也尽量不要重载父类A的方法。



##### 接口隔离原则
    英文:
    This principle states that “Clients should not be forced to depend on methods that they do not use”.

    中文:
    描述:客户端不应该依赖它不需要的接口,一个类对另一个类的依赖应该建立在最小的接口上。

    解释:
    问题由来：类A通过接口I依赖类B，类C通过接口I依赖类D，如果接口I对于类B和类D来说不是最小 接口，则类B和类D必须去实现他们不需要的方法。
    解决方案：将臃肿的接口I拆分为独立的几个接口，类A和类C分别与他们需要的接口建立依赖关系 。也就是采用接口隔离原则。


##### 依赖倒置原则
    英文:
    The principle states:“A. High-level modules should not depend on low-level modules. Both shoulddepend on abstractions.B. Abstractions should not depend on details.Details should depend on abstractions”.

    中文:
    描述:1.高层的模块不依赖底层的模块，二者都应该依赖其抽象 2.抽象不依赖细节，细节依赖 抽象

    解释:
    问题由来：类A直接依赖类B，假如要将类A改为依赖类C，则必须通过修改类A的代码来达成。这种 场景下，类A一般是高层模块，负责复杂的业务逻辑；类B和类C是低层模块，负责基本的原子操作； 假如修改类A，会给程序带来不必要的风险。
    解决方案：将类A修改为依赖接口I，类B和类C各自实现接口I，类A通过接口I间接与类B或者类 C发生联系，则会大大降低修改类A的几率。

### 知识正文
    设计模式分为三大类:
        创建型模式

         结构型模式

        行为型模式

#### 基本概念



## 结束语
 **恭喜各位，看完了语法中最基础的框架。但是，只有框架，没有句子的成分详细解释，是不够的。**
**下一篇将详细的讲述英语中的句子成分。**








