



# 文档数据库的缔造者MongoDB（上）

大数据和云计算的风被谷歌吹起来的时候，被谷歌收购的网络广告公司 DoubleClick 的原 CEO 和 CTO 们觉得自己应该蹭上时代的列车，再次创业，然后 10gen 公司就这样在纽约诞生了。它的创始人分别是 DoubleClick 的创始人兼 CTO 德怀特 · 梅里曼（Dwight Merriman）、CEO 凯文 · 瑞安（Kevin Ryan），以及工程师埃利特 · 霍洛威兹（Eliot Horowitz）。

公司成立之初，创始人的想法和 MongoDB 这个产品毫无关系：他们想做一个云计算的服务，并用开源的东西来搭建。然而很遗憾，这几位二次创业的人在开源社区找了一圈，也没有看到一个让人满意的东西。于是，怀着构建伟大云计算服务的梦想，他们决定先把这个事情停一停，先搭一个自己满意的数据库出来。这个数据库就是后来赫赫有名的 MongoDB。

MongoDB 的名字需要解释一下。国内很多人觉得是“芒果数据库”，其实不是的。在英文里，“芒果”是 Mango，而 Mongo 是 humongous 的中间部分，在英文里是“巨大无比”的意思。所以 MongoDB 可以翻译成“巨大无比的数据库”，更优雅的叫法是“海量数据库”。

这几位创始人的梦想就是创建一个和过去关系数据库完全不一样的数据库，使之具有这样一些特点：海量数据库、数据库的模型极其灵活、适合程序员使用。

**大概怀着伟大理想的人都会做出伟大的产品。**MongoDB 注定是独特的，在历史上会留下浓重一笔的产品。

当 MongoDB 开发出来的时候，创始人们给它的定义是：这是一个面向集合的、模式自由的文档型数据库。听到这里，你可能觉得有点晕了，那就先普及一下数据库的基本常识吧。

在过去的 30 多年里，整个工业界的数据库被所谓的关系数据库所主导。一个不太严谨的说法是：关系数据库的基本存储单元是表。而一张表则是有行有列的数据集合，而列的定义有严格的类型。所以关系数据库是一个严格定义的数据模型，每张表里的每条记录都是一个样的。

查询关系数据库的标准语言叫作 SQL。SQL 这个东西自从 IBM 发明出来以后，已经有 30 多年的历史了，人们爱它的有，恨它的也有。但是通常来说，程序员不太喜欢这个东西，因为它的基本理念和程序员编程的想法不一致。后来所谓的 NoSQL 风，指的就是那些不用 SQL 作为查询语言的数据存储系统，而文档数据库 MongoDB 正是 NoSQL 的代表。

**和关系数据库相反，MongoDB 的数据模型很不一样。**简单来说，MongoDB 面向的是集合而不是表，所有的数据存储都以集合为单位，而每个集合里面包含的东西则称为文档，一个集合可以包含无数个文档。每个文档，我们可以大致认为是个 JSON 数据模型。文档自带元数据。也就是说，MongoDB 里面每个集合的每个文档并不要求数据严格一致，而是可能千差万别。

**MongoDB 还有一个特色，它的查询使用的不是 SQL，而是程序语言和 API。**这样一来，MongoDB 对程序员就是一个非常友善的选择。当然，对于原本非常熟悉 SQL 的 DBA 和数据分析人员，这就显得不太友好了。

MongoDB 这个数据模型其实是非常脑洞大开的。在数据库领域的几十年发展里，很多人都试过各种各样挑战关系数据库的模型，但是鲜有成功的。即使成功了，也往往让人感觉雷声大雨点小，并不会对关系数据库的根本造成实质性的影响。然而 MongoDB 这个东西一出现，对有经验的数据库从业人员和使用者来说，第一个感觉就是这个东西是来搞事情的。

**在开发 MongoDB 的过程中，随着开发的深入，10gen 的人越来越觉得原来那个云计算平台是个虚无缥缈的东西。而这个他们一手缔造的文档数据库，可能是一个惊天动地的大杀器！虽然这些人其实不是数据库领域科班出身的，但他们对于数据库领域某些弊端的深刻理解，的确是一般人望尘莫及的。**

于是他们决定彻底忘记那个云计算平台，集中精力开发这个被命名为“巨大无比的数据库”的产品。在漫长的开发过后，**2009 年 2 月 10gen 正式开源了 MongoDB 的第一个版本。这对于 10gen 来说是一个非常重要的里程碑。**

然而我们必须要说，这个产品尽管看起来很新颖很有意思，但并不是一个很成熟的产品。它有无数多的东西没实现，有无数多的坑等着人们去踩。但是这些都已经不重要了，踩着 NoSQL 的东风，MongoDB 开始飞起来了。

**10gen 是一家特别注重宣传的公司，它在早期就对如何花钱做宣传非常有一套。**他们的做法是在全球各地资助成立很多的用户组，并组织每年一次的 MongoDB 大会。MongoDB 还开起了 Mongo 大学。他们知道自己产品的用户都是开发人员，因此只要开发人员说好，尤其是各个地区那些在圈内有名的技术大牛说好，那么不管这个产品实际上好不好，完善不完善，炒起来的感觉起码很好。

**先把大家都绑上 Mongo 的船，再慢慢地修理这艘船也是一种做法。**俗话说“吃人的嘴短，拿人的手软”，那些在 10gen 支持下成长起来的用户组，那些 10gen 给报销机票和旅馆来做宣讲的大牛们，互利互惠地就借着 NoSQL 的东风把 MongoDB 给“吹”起来了。

10gen 的 CTO 在某次采访中就说，他觉得与其花费那么多钱去做各种各样的广告，不如把钱花在资助用户组，资助 MongoDB 的会议上。让大家感觉到 MongoDB 产品好，公司对社区的支持力度大，是 10gen 花广告费的最佳途径。

踏上 MongoDB“贼船”的公司很多，比如说卖车的 Edmunds、美国版的“五八同城”Craigslist，以及老牌网络企业——思科。但是这些都比不上当年非常优秀的社交初创公司独角兽 FourSquare 使用 MongoDB 的影响来的大。当然这家公司现在是过气了，但在社交网络最为火爆的时候，FourSquare 可是非常著名的。

在 MongoDB 刚出来的时候，FourSquare 整个地“搬家”去用 MongoDB，这曾是一件非常大的事情。这件事情当然被 10gen 公司大书特书地进行宣传。而 MongoDB 在独角兽里面被广泛使用这一事实，让 MongDB 是新时代的数据库、MongoDB 适合开发 APP，以及 MongoDB 适合创业公司使用等等的观点，都瞬间被“吹”了起来。

到 2012 年的时候，作为 10gen 公司创始人之一的梅里曼，其与人联合运营的科技博客 Business Insider 把 MongoDB 作为仅次于 HTML 的新时代最重要的技能宣传给大家。一时间仿佛只要 MongoDB 掌握好了，就能够有一碗饭吃。而很多在线教育网站也专门开起课来，给那些急于从其他职业转战 IT 的人普及 MongoDB 的用法。

我们必须说，这种宣传非常成功。大概是因为 MongoDB 的创业者在这之前已经成功创业一次，要知道 DoubleClick 在网络广告领域非常成功，而且被成功卖给了谷歌，所以这些人搞创业公司的套路，一点都不像那些毫无经验的初创公司创始人。他们非常懂得如何做才能够最大限度地吸引眼球，最大程度地把自己的产品铺出去。至于盈利与否，在初创阶段，并不是他们最需要关心的问题。无论从何种角度去看，这个做法都很成功。

**除了在商业宣传上很成功，10gen 发布 MongoDB 以后，在产品的开发和维护上也采取了和其他公司很不一样的策略。**这个策略对于 MongoDB 的流行同样功不可没。

简单一点来说，10gen 公司决定集中精力做最重要的几件事情：

1. 吸引客户上 MongoDB 的船；
2. 让 MongoDB 更好用；
3. 对常用的编程语言，提供各种各样的库和接口的支持；
4. 整个技术支持团队非常地友善，而且尽职尽责。

10gen 公司重点去做的这些事情，有很多值得我们深思的地方。如果要简单概括的话，就是 10gen 公司希望所有使用 MongoDB 的用户都觉得这个产品非常非常地好用。如果万一真的出了问题，也有很好的技术支持来及时地解决问题。

**这种用户体验，绝对是开源社区中其他产品所不能达到的高度。**举个简单的例子，要想自己去部署 Hadoop 的一个计算集群，那绝对是一件老难老难的事情了。如果这个东西容易部署，也就不会诞生一批以卖“更好用的 Hadoop”为生的公司了。再举个例子，Hive 的部署也同样不好用。

如果我们从企业级应用上来看，Oracle 就是一个非常典型的难用的产品。一个企业如果想要把 Oracle 用好了，请有经验的 DBA 是基本条件，很多时候都需要咨询公司来帮助设计解决方案。这种项目的落地绝非简简单单就能行的。而 SQL Server 作为一个后起之秀，在数据库市场获得成功的一个重要原因，并非性能有多好，而是“很好用”。当然，SQL Server 只是和 Oracle 比起来好用得多。

但是 MongoDB 就不一样了，10gen 公司的目标就是让 MongoDB 非常非常地好用。而且从这一点上说，他们做得非常成功。整个社区里无数的用户组在提供支持，10gen 自己的客服绝对是用户至上，有问必答，而且非常礼貌及时。整个 10gen 的开发重点，也是让用户更好上手。

所有的因素加起来，MongoDB 对于创业公司来说就变得很有意思了：这个产品很好上手，支持也很多，而且还免费。创业公司拿着这个轮子，可以迅速实现自己的业务逻辑，而不需要再去学习怎么搭东西。我想正是这个原因，突然之间就着 NoSQL 的春风，MongoDB 就开始流行起来了。

**然而，接下来事情的发展，多少有些脱离美好的一面。MongoDB 从产品的角度来说，其实就是个半成品。MongoDB 实在有太多的东西没有做了，尤其是那些基本的东西，包括数据是不是会丢、结果是不是错的、并发做得好不好、支不支持事务处理，以及当规模上来的时候，能不能够通过加机器来解决问题。**

这些看起来本应是一个数据库产品非常重要的、基本的东西，MongoDB 做得却很差。一般来说，当一个人开始用 MongoDB 的时候，并不会遇到这样的问题，当然主要还是规模不够大，不至于触发瓶颈和问题。当 APP 或者网站的规模上去之后，同时工作的人多了，问题就会越来越常见，越来越令人无法忍受。

**而 10gen 的 CEO 在宣传时，又往往以极其夸大的方式，告诉大家 MongoDB 就是未来，MongoDB 就是一切。**这样的结果就是：很多人用 MongoDB 去取代关系数据库。然而渐渐地，这些人发现这种取代并没有带来真正的好处，除了一开始开发省了点力气外，后面要维护的成本越来越高。

**而 10gen 这种侧重于提高用户初始体验，外加一切都是 MongoDB 的宣传方式，终于导致了负面作用。**有经验的程序员开始跳出来，在各种论坛里公开宣称千万别上 MongoDB 的“贼船”，因为虽然开船的时候容易，接下来要付出的代价也很大，一旦规模上来，各种丢数据的问题就都出来了。

10gen 的 CTO 经常亲自上阵去和这些程序员们 PK。他接受采访的时候说，MongoDB 是个新产品嘛，新产品总是会有这样那样的问题，请给我们一些时间。他在论坛上和这些程序员交流，通常来说跳不出这样一些套路，就是：

1. 这个问题我们在下一版里会修好的；
2. 这个问题我从来没有遇到过，估计是假的吧；
3. 这个问题你给我们开 BUG 啊；
4. 这个问题我不相信是真的，肯定是你们程序写错了。

不管你信不信，这种回复，加上 10gen 的公关能力，确实在很多时候给 MongoDB 赢得了修复问题的时间。但是这样的一种方式也让用户的接受度在降低。2009 到 2012 的三年里，MongoDB 被接受的比例一直处于飞升状态，而 2012 年开始这个曲线就越来越平。大家到底要不要用 MongoDB，已经不再是“无脑”上的问题，而是要反复斟酌之后再做决定的事情。

尽管 10gen 的 CEO 一直高调宣布 MongoDB 无所不能，大家赶紧上，实际上后面的几年里，很多人反而是渐渐地离开了 MongoDB。大家意识到，MongoDB 作为一个一开始上手很快的东西，可能只适合一个 V1 产品。产品上一点规模之后，背后的数据存储系统还是要换的。

当然，任何公司都有盈利的压力。MongoDB 作为一个开源、免费的产品，10gen 公司不可能免费赚吆喝，它烧在社区建设上的钱也不是小数目。**10gen 推出盈利产品的第一步，是推出了对 MongoDB 的商业付费技术支持。**

商业付费支持是很多公司常用的方式。比如说 Hadoop 平台公司的 Hortonworks，其收入就基本上依赖于其提供的商业付费技术支持。MongoDB 从这里开始赚第一笔钱，并且其技术支持以“态度好”而著称。

**仅仅靠商业技术支持并不能为公司带来足够的收入，10gen 的另外一个创收途径是推出商业版的 MongoDB。**和开源的 MongoDB 比起来，商业版的自然要带更多的功能。这些功能最主要的是一个加密的存储引擎——数据以企业级密码强度加密后再存储，以及额外的安全相关的功能，比如说 LDAP 和 Kerberos 的支持，等等。这方面倒是体现了企业级应用市场和开源小创业公司之间的差异：企业级应用市场对加密和安全相关的内容要重视得多，没有这些功能大企业是不会使用这些产品的。

在很长时间里，MongoDB 的企业版都是 10gen 公司最主要的收入来源。此外，10gen 也提供云上的托管服务，给那些不愿意自己管理数据库的人提供服务。MongoDB 的业务模式和赚钱模式都还是很清晰的，但是一个巨大的问题在突显：MongoDB 作为一个数据库，始终都不是一个成熟的产品，并因此给很多采用 MongoDB 的企业带来了一些出乎意料的东西。

**2013 年的时候，10gen 公司觉得自己的名字已经不太符合现在的品牌效应了，于是正式更名为 MongoDB 公司，将产品名和公司名匹配起来。**

尽管 MongoDB 的发展经历了很多曲折，它的产品在功能上、性能上有很多问题，乃至受到了某些程序员的公开抵制；尽管 MongoDB 的接受度自 2012 年以来开始大幅度降低，它在企业市场上却依然保持着一个非常可观的占有率。

今天，我详细讲了 10gen 在 MongoDB 的开发、推广、发展和营收上的策略。MongoDB 侧重于易用性和对社区的支持，对其他方面则有些忽视了。那么，倘若你在运营一家做工具类产品的初创公司，在技术发展上又会采取什么样的策略呢？



# 文档数据库的缔造者MongoDB（下）

鉴于 10gen 公司改名叫 MongoDB 了，这篇文章里我们统一称为 MongoDB 公司。上回说到 MongoDB 公司的发展策略是尽善尽美地提供良好的使用体验，而对于产品功能本身，则是哪怕不成熟也先推出来再说。这种策略的好处是让这个数据库很快地流行开来，坏处是用户用久了各种问题层出不穷，苦不堪言，用户甚至跳出来公开说“不要用 MongoDB”。

**MongoDB 作为一个不成熟的产品，在 2016 年的时候终于曝出了一个非常严重的事件：MongoDB 的安全门事件**。任何一个国家的任何一个计算机产品，如果出现了安全相关的事件，对产品的影响都可能是致命的。

这个事件是安全界大牛维克托 · 格弗斯（Victor Gevers）在 2016 年底发现的，并于 2017 年初开始广为人知。做这个事情的黑客组织（HaRak1r1）把 MongoDB 的数据给删除了，然后留下一个叫作 WARNING 的数据库，里面的主要内容是说：给我们送 0.2 比特币到某个收费的地址，然后给我们发邮件（harak1r1@sigaint.org）告诉我们你的 IP 地址，这样你就能够把丢失的数据拿回来。

大概是这个事情被到处报道，闹得沸沸扬扬的，而这个黑客组织又怕暴露在聚光灯下，在两天紧锣密鼓地攻击了大概 8500 个不同的 MongoDB 以后，这个黑客组织收手了。

然而架不住“撑死胆大的，饿死胆小的”，黑客后浪推前浪，前浪虽然死在了沙滩上，后浪仍接踵而来，own3d 马上就开始继续搞事，而且收费涨到了半个比特币，一下涨了好几倍。这之后，阿猫阿狗的黑客组织鱼龙混杂地展开攻击，开始删除各种 MongoDB 的数据。事情到这个地步，问题已经扩大化了。

**那么，到底是什么导致了这个问题呢**？为什么有那么多人的 MongoDB 在“裸奔”呢？这个问题非常有意思，而国外早有好事者在研究。

**简单来说，MongoDB 从一开始就不是一个安全的系统**。MongoDB 的早期版本一直都默认侦听 0.0.0.0 这个外网地址，但如果有基本的安全常识，都应该知道默认配置要放到内网地址 127.0.0.0。

这个问题在 2011 年 11 月就有用户汇报给了 MongoDB，有兴趣的可以查 Jira 上的 Server-4216。很有意思的是，在这个汇报的问题中，MongoDB 公司 CTO 在 2012 年还回复说，如果我们修了这个 BUG，就会影响到以前的安装的行为。如此严重的 BUG 在 MongoDB 中，又是什么时候修复的呢？2014 年。

近三年的时间里，这个 BUG 的优先级居然只有 P2 级别。一般软件公司遇到这种安全问题，给的等级多半都是 P0 级别。当我亲自去查看这个 BUG 的详情时，一种恐惧感油然而生。MongoDB 的人，难道基本的安全常识都没有吗？

做个对比来看，传统的数据库，不管是商用的 Oracle、SQL Server，还是开源的 PostgreSQL、MySQL，默认的设置都有用户名和密码，都会监听在内网上。我们不能说这就特别安全，但起码默认的设置还是合情合理的。MongoDB 倒好，默认的设置是在外网上“裸奔”。我也不知道这个事情为什么长久未被解决。

根据不完全统计，这次全球暴露在黑客眼皮子底下，没有任何安全防范措施的数据近 600 TB。当然，这个数字还可能更大。这件事让我们看到了，一个产品如果做得非常好用，但是该花力气的地方却没花，可能造成的破坏力到底有多大。

**MongoDB 的这次安全门事件，也引发了一些人一直以来就有的顾虑**。在印度，政府对 MongoDB 一直就持怀疑态度，觉得这个软件不安全，其主要理由是 MongoDB 的投资机构里面有一家叫作 In-Q-Tel 的风险投资公司。这家公司在创投圈里很有名，可能不被普通群众熟知，但是其背后的老板，那可是无人不知无人不晓的 CIA。

一家接受了 CIA 这个美国情报机构作为老板的风险投资公司，它开发的软件到底安全性有多高，是不是有后门，有没有搞鬼，基本上是件说不清楚的问题。这次大规模的数据泄露“裸奔”事件，和产品可能既有的漏洞是不是有关系，更是谁也说不清楚的事情了。

**可以说，在我见过的数据库产品中，这是第一个犯下如此常识性数据安全错误的**。那么，一家企业会想让自己的数据“裸奔”于互联网，被黑客删除问你要比特币吗？如果你不想面临这样的境况，那就得仔细斟酌一下要不要使用 MongoDB 了。

当然，MongoDB 的新版里这个问题早就修复了。只是很多人，尤其是政府部门，对于这个接了 CIA 投资的公司，始终都保持了一些警惕的态度。我并没有看到中国对这家公司和这个产品的担心，但是印度已经有了这样的担心。这种担心是杞人忧天，还是确有必要呢？

**2017 年下半年，震撼整个 IT 圈的事情莫过于 MongoDB 开始准备材料要上市了**。具体上市的时间可能不是今年底，就是明年初。MongoDB 这一路走来，终于走向上市的道路，这的确是一件可喜可贺的事。

小道消息传来，有人采访 MongoDB 的领导，领导当然是一副天机不可泄露的样子。今年 9 月份在慕尼黑参加数据库领域的顶级会议 VLDB 时，我还和 MongoDB 的人聊天，问他们对公司即将上市是怎么看的。

对方的第一反应当然是环顾左右而言它，不想讨论这个话题。于是我说，要不我们就假设要上市吧，那么上市以后对你们有什么改变呢？当然，改变最大的就有辛辛苦苦那么久，终于要赚到钱了。

在北美市场上创业公司不计其数，能够最后走到上市的却百不存一。顺利地上市，无疑是对 MongoDB 这个产品的最大肯定。投资人终于有了回报，员工和创始人终于可以从此财务自由、衣食无忧了。上市，对于很多人来说是人生的新起点；对很多公司来说，也是发展的里程碑。

这条上市路，不知道 MongoDB 会怎样走下去，市场上对于 MongoDB 的热情毕竟没有当初那样热烈了。然而即使热度降低以后，MongoDB 依然是全球市场上占有率最高的数据库之一。MongoDB“容易上手”的特性，决定了它在初创公司里占据特殊的地位，更何况很多公司还拿它来跑更重要的非初创产品呢。

但是我们也应该承认，即使到今天，MongoDB 刨去“易用性”，在很多方面仍然存在很多这样那样的问题。MongoDB 公司赚钱的途径也有一些，但是离盈利却还比较遥远。虽然大家都知道创业公司一般都要烧钱很多年。

MongoDB 一路走来并即将上市，这也是一个成功的故事了。而从 10gen 发展至今，它在开发出 MongoDB 这个产品之后所采取的一系列开发和商业运作措施，和很多同时代、同类型的公司相比有着鲜明的特点。2017 年初的这次大规模安全事件，则是一个非常值得你我思考的严肃事件。

关于 MongoDB 的故事讲完了，MongoDB 上市的消息也已被证实。但不知道你又会如何看待 MongoDB 的这次安全门事件，以及 MongoDB 的投资机构里面有 CIA 作后台的 In-Q-Tel 呢？





# 以MongoDB为例，看基础架构类产品创业

**MongoDB 的产品是文档数据库，可以归类于基础架构类的创业公司。这类公司的特点是，产品本身不产生价值，使用其产品做业务和应用的第三方使用者产生价值并给他们付费。**

基础架构类的软件有很多，比如微软的 Windows、Oracle 的数据库，再比如整个 Hadoop 生态圈。

近些年来，因为大数据的蓬勃发展，以 Hadoop 生态圈为代表的开源基础架构非常火爆。几乎每个 Hadoop 的拳头产品背后都有一家或者几家创业公司，比如说 Hadoop 的发行商就有 Cloudera、Hortonworks 以及 MapR，Spark 的背后则是 DataBricks。

这些公司成长于开源环境下，发展于开源环境下。和以前的闭源产品比起来，近些年来的基础架构类创业产品基本上都需要开放源代码，或者至少部分开放源代码。

总结一下基础架构类产品的显著特点，就是：

1. 产品本身不直接产生价值，被使用以后才产生价值；
2. 产品往往只有被大量用户使用以后，才能够盈利，未普及开来的产品基本上不可能赚钱；
3. 这个市场赢者和输者之间的差距很大，第一和第二所能赚到的钱差距非常大；
4. 通常来说这是创业的红海，因此需要创业公司不仅有很强的系统开发能力，更要有很厉害的市场公关能力。

MongoDB 出来之前，数据库市场主要有两类产品。第一类是传统意义上的关系数据库。这类数据库的特点是数据模型死板、产品难用，但是产品性能、稳定性和安全性都比较高，而且此类产品通常很贵。第二类是新起来的 NoSQL。NoSQL 有不少优点，但是最大的问题是写应用的人会觉得很难用。

**MongoDB 作为一个文档数据库，公司开发时在策略上做了几个很重要的决定。具体来讲，首先是把绝大部分注意力都用在提高易用性上，其次是把大量的广告和宣传费用都投入到社区的建设中去。**

这两种策略的好处非常明显，首先 MongoDB 这个数据库上手快，非常好用，对客户的支持也好。用别的产品得学一个月，用 MongoDB 一天就够了。如果我是用户，我也喜欢啊。其次，社区在 MongoDB 的支持下日益壮大。作为工具类产品，用户是开发者，开发者社区不壮大，不会有更多的人来用的。

**MongoDB 在这两方面做得都非常成功。那么一个用户接受度那么高的产品，为什么最后商业化的时候，盈利却不好呢？这就要说到面子和里子的问题了。** 好用是一个产品的面子，产品是否成熟、稳定、 安全，能够应对大规模的并发，不丢数据，不会给出错误的结果，不会突然死机等则是里子的问题。

最后上线的产品，必须能够真正稳定高效地把系统跑起来。MongoDB 的开发，对用户体验重视到了极致，但是对于产品的基本功能，似乎没花太多力气。MongoDB BUG 满天飞，2017 年的安全问题更是让无数人的数据被黑客删除。所以用户通常是上了 MongoDB 的船，等到没办法继续用下去了，又下了船。这可以说是 MongoDB 的巨大悲哀。

MongoDB 最初吸引了很多大客户，那么时至今日，这些大客户去了哪里呢？很多都跑回去用关系数据库了。**一个好用但是不可靠的产品，比起一个可靠但不好用的产品，哪个对用户更有吸引力？这个问题，应该不难回答。**

**那么，我们从 MongoDB 这里学到了些什么呢？**

**做基础架构类产品，首先也是最根本的一点，就是可靠。** 产品不可靠，即使用户能够一时上了船，也不能保证一世都在这个船上。MongoDB 的使用者里颇有几个大客户，但是它们却都离开了。产品的可靠性，对于一个产品的长远发展来说，非常非常得重要。

**其次，从用户体验的各方面来说，MongoDB 确实可以打 150 分，远远超过满分。** 如果我能够一天学会，为什么非要用一个月去学其他的东西呢？为什么其他公司能够做出可靠的产品，却做不出好用的东西呢？这同样是这些“其他公司”需要思考的。

而作为创业者，一旦进入基础架构的创业行列，前面就不是一马平川了。公司的程序员资源都是有限的，MongoDB 是，其他公司也是。**作为创业公司，如何在人力资源有限的情况下去平衡可靠性和可用性，是一个非常值得思考的问题。**

为什么这样说呢？不可用，就没有人愿意用；不可靠，就没有人能够用下去。但是创业公司的资源就这么多，二选一也不现实，面面俱到更不现实，怎么办？在优先级的安排上，这其实是蛮有挑战的一件事。

我们肯定不能像 MongoDB 那样弄出安全事件，安全问题在哪里都是高优先级的事。做基础架构如果存在安全问题，是没有人敢用的。但是，比如说是不是需要支持大量的并发、要不要做到多数据中心运行等等，我想有很多东西是可以进行取舍的。

**取舍的标准同样很复杂，我也只能凭借个人的开发经验说几句。**

首先，应该确定使用人群。如果使用人群不需要大规模数据处理，或者不立即需要，那么做大规模并发相关的功能无疑是早了一点。

其次，应该确定可用性的痛点在哪里，不需要面面俱到，但是最重要的可用性流程都需要走一遍。很多东西只要大部分人觉得很好用，最后 10% 的人群自己有很强的动手能力就可以了。不需要像 MongoDB 那样“可用性好到极致，可靠性却成问题”。

最后，我觉得“吹嘘”肯定是会出问题的。MongoDB 在宣传上花了很大力气，却在产品质量仍然存在问题的情况下，就给用户设置了很高的预期。很多时候对于开源产品，如果实事求是地告诉用户东西还不错，但是没完工，大家心里有数以后，对产品的预期和要求就不会过高。**过度宣传，往往是基础架构类产品由盛转衰的很重要的因素。**

**但无论如何，MongoDB 都是一个瑕不掩瑜的产品。** 这个产品至今依然有无数多的使用者。当然，很多人现在主要是把它作为原型系统在用，等产品真的上线以后就换掉。因此，MongoDB 如果希望成为一个可靠、有稳定营收，在世界范围内真正有影响力的产品，现在是时候静下来好好提高产品的可靠性了。

**如果要做基础架构类的创业产品，可靠性和可用性的兼顾，是每个创业者都需要思考和解决的问题。**





























